<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Testador Completo - Lore Achadinhos</title>

  <!-- CSS principal -->
  <link rel="stylesheet" href="../css/style.css" />

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #fff5f9;
      color: #444;
      padding: 40px;
      text-align: center;
    }

    h1 {
      color: #e91e63;
      font-size: 2rem;
      margin-bottom: 20px;
    }

    button {
      background: #e91e63;
      border: none;
      color: #fff;
      padding: 10px 20px;
      margin: 8px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    button:hover {
      background: #d81b60;
    }

    section {
      margin-top: 30px;
      padding: 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      display: inline-block;
      min-width: 300px;
    }

    .log-box {
      margin-top: 25px;
      font-size: 0.9rem;
      color: #666;
      background: #fdfdfd;
      border: 1px solid #eee;
      padding: 10px;
      border-radius: 8px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>üîß Testador Completo - Lore Achadinhos</h1>
  <p>Use os bot√µes abaixo para testar as principais fun√ß√µes JavaScript do site.</p>

  <section>
    <h2>üßÅ Toasts</h2>
    <button id="btn-toast-success">Toast Sucesso</button>
    <button id="btn-toast-error">Toast Erro</button>
    <button id="btn-toast-info">Toast Info</button>
  </section>

  <section>
    <h2>üõçÔ∏è Modais</h2>
    <button id="btn-modal-open">Abrir Modal</button>
    <button id="btn-modal-close">Fechar Modal</button>
  </section>

  <section>
    <h2>üõí Carrinho</h2>
    <button id="btn-cart-add">Adicionar Item</button>
    <button id="btn-cart-clear">Limpar Carrinho</button>
  </section>

  <section>
    <h2>üß† Diagn√≥stico</h2>
    <button id="btn-load-products">Carregar Produtos</button>
    <div class="log-box" id="logBox">Clique em "Carregar Produtos" para testar.</div>
  </section>

  <!-- Toast container -->
  <div class="toast-container"></div>

  <!-- Modal simples para teste -->
  <div id="testModal" class="modal-overlay" style="display:none;">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('testModal')">&times;</button>
      <h2>Modal de Teste</h2>
      <p>Este √© um exemplo de modal aberto pelo testador. üéÄ</p>
    </div>
  </div>

  <!-- Importando e expondo m√≥dulos -->
  <script type="module">
    import { showToast, openModal, closeModal } from "../js/utils.js";
    import { addToCart, clearCart } from "../js/cart.js";
    import { getProducts } from "../js/products.js";

    // Tornar fun√ß√µes globais (acess√≠veis pelo onclick e console)
    window.showToast = showToast;
    window.openModal = openModal;
    window.closeModal = closeModal;
    window.addToCart = addToCart;
    window.clearCart = clearCart;
    window.getProducts = getProducts;

    // Testes dos bot√µes
    document.getElementById("btn-toast-success").addEventListener("click", () => {
      showToast("Opera√ß√£o conclu√≠da com sucesso!", "success");
    });

    document.getElementById("btn-toast-error").addEventListener("click", () => {
      showToast("Ocorreu um erro inesperado!", "error");
    });

    document.getElementById("btn-toast-info").addEventListener("click", () => {
      showToast("Este √© um aviso informativo.", "info");
    });

    document.getElementById("btn-modal-open").addEventListener("click", () => {
      openModal("testModal");
    });

    document.getElementById("btn-modal-close").addEventListener("click", () => {
      closeModal("testModal");
    });

    document.getElementById("btn-cart-add").addEventListener("click", () => {
      addToCart({ id: 999, title: "Produto Teste", price: 49.9 }, "Rosa", "P", 1, {});
      showToast("Item adicionado ao carrinho!", "success");
    });

    document.getElementById("btn-cart-clear").addEventListener("click", () => {
      clearCart();
      showToast("Carrinho limpo com sucesso!", "success");
    });

    document.getElementById("btn-load-products").addEventListener("click", () => {
      const products = getProducts();
      console.log("Produtos carregados:", products);
      document.getElementById("logBox").innerText = "Produtos carregados com sucesso! Veja no console (F12).";
      showToast("Produtos carregados! Veja no console.", "info");
    });
  </script>
</body>
</html>
